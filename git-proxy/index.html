<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<title>GitHub 文件加速</title>
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="favicon.ico">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		@font-face {
		  font-family: 'iconfont';
		  src: url('iconfont.woff2?t=1744700749830') format('woff2'),
		       url('iconfont.woff?t=1744700749830') format('woff'),
		       url('iconfont.ttf?t=1744700749830') format('truetype');
		}

		.iconfont {
		  font-family: "iconfont" !important;
		  font-size: 16px;
		  font-style: normal;
		  color: #fff;
		  -webkit-font-smoothing: antialiased;
		  -moz-osx-font-smoothing: grayscale;
		}

		:root {
			--primary-color: #6e00aa;
			--primary-hover: #9f00f4;
			--text-color: #f0f6fc;
			--bg-gradient: linear-gradient(135deg, #8100c2 0%, #46006a 100%);
			--shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
		}

		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
			min-height: 100vh;
			background: var(--bg-gradient);
			color: var(--text-color);
			display: flex;
			justify-content: center;
			align-items: center;
			padding: 20px;
		}

		.container {
			width: 100%;
			max-width: 800px;
			padding: 10px 20px;
			text-align: center;
		}

		.logo {
			margin-bottom: 2rem;
			transform: scale(1);
			transition: transform 0.3s ease;
		}

		.logo:hover {
			transform: scale(1.1);
		}

		.title {
			font-size: 2.5rem;
			font-weight: 600;
			margin-bottom: 1rem;
			background: linear-gradient(45deg, #ffffff, #e2e8f0);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
		}

		.tips a {
			color: #FFFFFF;
			text-decoration: none;
			border-bottom: 1px dashed #FFFFFF;
			transition: all 0.2s ease;
		}

		.tips a:hover {
			color: #FFFFFF;
			border-bottom-color: #FFFFFF;
		}

		.search-container {
			position: relative;
			max-width: 760px;
			margin: 2rem auto;
		}

		.search-input {
			width: 99%;
			height: 56px;
			padding: 0 60px 0 24px;
			font-size: 1rem;
			color: #1f2937;
			background: rgba(255, 255, 255, 0.9);
			border: 2px solid transparent;
			border-radius: 12px;
			box-shadow: var(--shadow);
			transition: all 0.3s ease;
		}

		.search-input:focus {
			border-color: var(--primary-color);
			background: white;
			outline: none;
			box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.6);
		}

		.search-button {
			position: absolute;
			right: 8px;
			top: 50%;
			transform: translateY(-50%);
			width: 44px;
			height: 44px;
			border: none;
			border-radius: 8px;
			background: var(--primary-color);
			color: white;
			cursor: pointer;
			transition: all 0.2s ease;
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.search-button:hover {
			background: var(--primary-hover);
			transform: translateY(-50%) scale(1.05);
		}

		.search-button .iconfont {
			font-size: 20px;
		}

		.tips {
			margin-top: 2rem;
			color: rgba(255, 255, 255, 0.8);
			line-height: 1.6;
			text-align: left;
			padding-left: 1.8rem;
		}

		.example-title {
			color: #fff;
			margin-bottom: 1.5rem;
			font-size: 1rem;
			font-weight: 700;
			position: relative;
			padding-bottom: 0.8rem;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		}

		.example p {
			margin: 0.8rem 0;
			font-family: monospace;
			font-size: 0.95rem;
			color: rgba(255, 255, 255, 0.8);
			padding-left: 1.5rem;
			line-height: 1.4;
			word-break: break-all;
		}

		.example {
			margin-top: 2rem;
			padding: 1.8rem;
			background: rgba(255, 255, 255, 0.05);
			border-radius: 12px;
			text-align: left;
			border: 1px solid rgba(255, 255, 255, 0.1);
			overflow-wrap: break-word;
			word-wrap: break-word;
		}

		@media (max-width: 640px) {
			.container {
				padding: 20px;
			}

			.title {
				font-size: 2rem;
			}

			.search-input {
				height: 50px;
				font-size: 0.9rem;
			}

			.search-button {
				width: 38px;
				height: 38px;
			}

			.example {
				padding: 1rem;
				font-size: 0.8rem;
				padding-left: 1rem;
				padding-right: 1rem;
			}

			.result {
				flex-direction: column;
			}
			
			.result a {
				word-break: break-word;
			}
			
			.retext {
				flex-direction: row;
				justify-content: space-between;
				align-items: flex-start;
			}
			
			.retext p {
				width: 100%;
				margin-right: 0;
				margin-bottom: 10px;
				text-align: left;
			}
			
			.button-container {
				position: static;
				align-self: flex-end;
			}
		}

		.result {
			margin-top: 1rem;
			margin-bottom: 1rem;
			padding: 1rem;
			background: rgba(255, 255, 255, 0.1);
			border-radius: 8px;
			text-align: left;
			border: 1px solid rgba(255, 255, 255, 0.2);
			position: relative;
			min-height: 100px;
			display: flex;
			flex-direction: column;
		}
		
		.retext {
			color: #FFFFFF;
			text-decoration: none;
			display: flex;
			justify-content: space-between;
			align-items: center;
			width: 100%;
		}
		
		.retext p {
			flex: 1;
			max-width: 90%;
			word-break: break-word;
			overflow-wrap: break-word;
			margin-right: 10px;
		}

		.result a {
			color: #FFFFFF;
			text-decoration: none;
			display: flex;
			justify-content: space-between;
			align-items: center;
			word-break: break-word;
		}

		.button-container {
			display: flex;
			flex-direction: column;
			gap: 10px;
			position: absolute;
			right: 1rem;
			top: 50%;
			transform: translateY(-50%);
		}

		.button {
			display: flex;
			justify-content: center;
			align-items: center;
			width: 40px;
			height: 40px;
			background: rgba(255, 255, 255, 0.1);
			border-radius: 8px;
			color: white;
			cursor: pointer;
			transition: all 0.2s ease;
		}

		.button:hover {
			background: rgba(255, 255, 255, 0.2);
			color: #1E90FF;
		}

		.button span.iconfont {
			font-size: 20px;
		}
		
		.domain-list {
			list-style-type: none;
			margin-left: 2rem;
			padding-left: 0;
		}
		
		.domain-list li {
			margin-bottom: 0.5rem;
		}

		.notification {
			position: fixed;
			top: 20px;
			left: 50%;
			transform: translateX(-50%);
			background: rgba(70, 0, 106, 0.9);
			color: white;
			padding: 1rem 2rem;
			border-radius: 15px;
			z-index: 1000;
			opacity: 0;
			transition: opacity 0.3s ease;
		}

		.notification.show {
			opacity: 1;
		}

		p a {
			color: #FFFFFF;
			text-decoration: none;
		}

		p a:hover {
			text-decoration: underline;
		}
	</style>
</head>
<body>
	<div class="container">
		<center>
			<div class="logo">
				<a href="https://github.com/KuwiNet/CF-Ghproxy" target="_blank">
					<svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 512 512" >
						<image href="logo.svg" />
					</svg>
				</a>
			</div>
			<h1 class="title">GitHub 文件加速</h1>
		</center>

		<form onsubmit="toSubmit(event)" class="search-container">
			<input 
				type="text" 
				class="search-input"
				name="q" 
				placeholder="请输入 GitHub 链接"
				pattern="^((https?://)?(github.com/.+?/.+?/(?:releases|archive|blob|raw|suites)|((?:raw|gist).(?:githubusercontent|github).com))/.+$" 
				required
			>
			<button type="submit" class="search-button">
				<span class="iconfont">&#xe664;</span>
			</button>
		</form>

		<div id="result" class="result" style="display: none;">
			<div class="retext">
				<p><span id="generated-link"></span></p>
			</div>
			<div class="button-container">
				<div class="button" onclick="copyLink()" title="复制链接">
					<span class="iconfont">&#xe60f;</span>
				</div>
				<div class="button" onclick="jumpToLink()" title="跳转">
					<span class="iconfont">&#xe6ad;</span>
				</div>
			</div>
		</div>

		<div class="tips">
			<p><span class="iconfont">&#xe763;</span> GitHub 链接输入支持带协议头 ( https:// ) 或不带</p>
			<p><span class="iconfont">&#xe610;</span> 支持的域名：</p>
			<ul class="domain-list">
				<li><span class="iconfont">&#xe6af;</span> github.com &nbsp;&nbsp;<span class="iconfont">&#xe6af;</span> raw.githubusercontent.com</li>
				<li><span class="iconfont">&#xe6af;</span> gist.githubusercontent.com &nbsp;&nbsp;<span class="iconfont">&#xe6af;</span> api.github.com</li>
			</ul>
			<p><span class="iconfont">&#xe67c;</span> Release、Archive 使用 CF 加速，文件会跳转至 JsDelivr</p>
			<p><span class="iconfont">&#xe610;</span>️ 支持 HTTPS Git Clone 
			&nbsp;&nbsp;<span class="iconfont">&#xed1a;</span>️ 不支持 SSH Git Clone 
			&nbsp;&nbsp;<span class="iconfont">&#xed1a;</span>️ 不支持文件夹下载</p>
		</div>

		<div class="example">
			<div class="example-title"><span class="iconfont">&#xe72a;</span>️️ 输入示例：</div>
			<p><span class="iconfont">&#xe655;</span>️️️ 分支源码：https://github.com/user/repo/archive/main.zip</p>
			<p><span class="iconfont">&#xe616;</span>️️️ 版本发布：https://github.com/user/repo/releases/download/v1.0.0/app.zip</p>
			<p><span class="iconfont">&#xe600;</span>️️ 原始文件：https://raw.githubusercontent.com/user/repo/main/file.txt</p>
			<p><span class="iconfont">&#xe6ca;</span>️️ Git克隆：https://github.com/user/project.git</p>
			<p><span class="iconfont">&#xe617;</span>️️️ Gist文件：https://gist.githubusercontent.com/user/gist_id/raw/file.txt</p>
			<p><span class="iconfont">&#xe71c;</span>️️ Api：https://api.github.com/repos/fatedier/frp/releases/latest</p>
		</div>

		<div class="example">
			<div class="example-title"><span class="iconfont">&#xe824;</span>️️️ 基本使用示例：</div>
			<p><span class="iconfont">&#xe6ca;</span>️️ Git克隆：git clone https://ghx.pp.ua/github.com/user/project.git</p>
			<p><span class="iconfont">&#xe618;</span>️️ 文件下载：wget https://ghx.pp.ua/raw.githubusercontent.com/user/repo/main/file.txt</p>
			<p><span class="iconfont">&#xe616;</span>️️️ 版本发布：curl -LO https://ghx.pp.ua/github.com/user/project/project.sh</p>
		</div>
		
		<p style="position: sticky;top: calc(100% - 2.5em);">
			<br><br>
			Support by <a href="https://kuwi.net/" target="_blank">KuWi</a> ,  Run on Cloudflare Workers .
		</p>
	</div>

	<div id="notification" class="notification">
		
	</div>

	<script>
		function toSubmit(e) {
			e.preventDefault();
			const input = document.getElementsByName('q')[0];
			let userInput = input.value;
		
			// 去掉协议头
			userInput = userInput.replace(/^https?:\/\//, '');
		
			// 验证域名
			const validDomains = ['github.com', 'raw.githubusercontent.com', 'gist.githubusercontent.com', 'api.github.com'];
			const isValidDomain = validDomains.some(domain => userInput.startsWith(domain));
		
			if (!isValidDomain) {
				showNotification('&#xe6aa;', '&nbsp;请输入 Github 链接');
				input.value = '';
				return;
			}
		
			const baseUrl = location.href.substr(0, location.href.lastIndexOf('/') + 1);
			const generatedUrl = baseUrl + userInput;
		
			// 显示生成的链接
			document.getElementById('generated-link').href = generatedUrl;
			document.getElementById('generated-link').textContent = generatedUrl;
			document.getElementById('result').style.display = 'block';
		
			// 清空输入框
			input.value = '';
		}
		
		function copyLink() {
			const link = document.getElementById('generated-link').href;
			navigator.clipboard.writeText(link).then(() => {
				showNotification('&#xe63f;', '&nbsp;链接已复制');
			}, (err) => {
				console.error('复制失败:', err);
			});
		}
		
		function jumpToLink() {
			const link = document.getElementById('generated-link').href;
			window.open(link, '_blank');
		}
		
		function showNotification(iconCode, message) {
			const notification = document.getElementById('notification');
			notification.innerHTML = `<span class="iconfont">${iconCode}</span> ${message}`;
			notification.classList.add('show');
			setTimeout(() => {
				notification.classList.remove('show');
			}, 3000);
		}
	</script>
</body>
</html>
